[tasks.list-tool-backends]
description = "Show the backend for each tool managed by mise"
run = '''
mise ls | awk '{print $1}' | xargs -n1 mise tool | grep '^Backend:'
'''

[tasks.gh-manage]
description = "Interactive GitHub issue/PR manager with gum"
run = '''
while true; do
  # Issue/PR/Quitを選択
  target=$(printf "issue\npr\nquit" | gum choose)

  # 未選択またはQuit選択でスクリプトを終了
  if [ -z "$target" ] || [ "$target" = "quit" ]; then
    exit 0
  fi

  while true; do
    # コマンド入力を受け付ける
    command=$(gum input --prompt "gh ${target}> " --header "Type 'exit' to return to selection")

    # 未入力の場合はエラーを表示して続行
    if [ -z "$command" ]; then
      echo "Please enter a command (or type 'exit' to return)"
      echo "---"
      continue
    fi

    # exitで選択画面に戻る
    if [ "$command" = "exit" ]; then
      break
    fi

    # コマンド実行（|| true でエラー時もスクリプトを続行）
    eval "gh $target $command" || true
    echo "---"
  done
done
'''

[tasks.copilot-write]
description = "Launch GitHub Copilot CLI with write tool enabled"
run = "copilot --allow-tool 'write' --model claude-haiku-4.5"

[settings]
windows_default_inline_shell_args = "C:/Progra~1/Git/bin/bash.exe --noprofile -c"
